/*! For license information please see styleit-api.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("styleit",[],t):"object"==typeof exports?exports.styleit=t():e.styleit=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./index.js")}({"./index.js":function(e,t,n){e.exports=n("./src/index.js").default},"./src/enums/INLINE_ELEMENTS.js":function(e,t,n){"use strict";n.r(t),n.d(t,"inline_elemets_arr",(function(){return r}));const r=["STRONG","EM","DEL","STRIKE","I","S","U","MARK","B","SUB","SUP","SMALL","INS","A"]},"./src/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var r=n("./src/unwrap.js"),o=n("./src/utilis/createSelection.js"),i=n("./src/utilis/getAttributes.js"),a=n("./src/utilis/getCss.js"),l=n("./src/utilis/getSelectedElement.js"),c=n("./src/utilis/ischildOf.js"),s=n("./src/utilis/isElement.js"),u=n("./src/utilis/getStyleTags.js");n("./src/utilis/prototype.js");function f(e,t,n={}){const{tag:f=t.nodeName}=n;if(e===t)return null;if(!Object(c.ischildOf)(e,t))return null;if(!Object(s.isElement)(e)||!Object(s.isElement)(t))return null;const d=(e,t)=>{const n=Object(a.getCss)(e,t),r=Object(i.getAttributes)(e,t),o=document.createElement("string"==typeof r.href?"a":f);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];o.style[e]=t}for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=r[e];o.setAttribute(e,t)}return o};Object(o.createSelection)(e);const p=Object(l.getSelectedElement)(),y=Object(u.getStyleTags)(p,t),h=d(p,t);h.appendChild(y);let m=window.getSelection().getRangeAt(0);m.setStart(t,0);const v=d(Object(l.getSelectedElement)(),t);let g=m.extractContents();v.appendChild(g),m.setEnd(t,t.childNodes.length);const b=d(Object(l.getSelectedElement)(),t);let E=m.extractContents();b.appendChild(E);const w={left:v,center:h,right:b};t.innerHTML="";for(const e in w)if(Object.prototype.hasOwnProperty.call(w,e)){const n=w[e];t.appendChild(n)}return Object(r.unwrap)(t),w}},"./src/unwrap.js":function(e,t,n){"use strict";n.r(t),n.d(t,"unwrap",(function(){return o}));var r=n("./src/utilis/replaceNode.js");const o=function(e){const t=document.createRange();t.selectNodeContents(e);const n=t.extractContents();return Object(r.replaceNode)(e,n),n}},"./src/utilis/createSelection.js":function(e,t,n){"use strict";n.r(t),n.d(t,"createSelection",(function(){return r}));const r=function(e){if(document.body.createTextRange){const t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},"./src/utilis/getAttributes.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getAttributes",(function(){return o}));var r=n("./src/utilis/ischildOf.js");function o(e,t){const n=["IMG","A","BR","HR","INPUT","AUDIO","VIDEO","PICTURE"];let o={},i=e;for(;i&&Object(r.ischildOf)(i,t.parentElement);){let e=i.attributes;for(let t=e.length-1;t>=0;t--)"style"===e[t].name||n.includes(i.nodeName)||o[e[t].name]||(o[e[t].name]=e[t].value);i=i.parentElement}return o}},"./src/utilis/getCss.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getCss",(function(){return i}));var r=n("./src/utilis/getStyle.js"),o=n("./src/utilis/ischildOf.js");function i(e,t){let n={},i=e;for(;i&&Object(o.ischildOf)(i,t.parentElement);){let e=Object(r.getStyle)(i);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];n[t]||(n[t]=r)}i=i.parentElement}return n}},"./src/utilis/getSelectedElement.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getSelectedElement",(function(){return r}));const r=function(){let e=document.getSelection();if(null!==e){let t=e.anchorNode;if(null!==t){for(;3===t.nodeType;)t=t.parentNode;return t}return null}}},"./src/utilis/getStyle.js":function(e,t,n){"use strict";function r(e){if(!e||!e.style)return{};let t={},n=e.getAttribute("style");if(n){let e=n.split(";");Array.isArray(e)&&e.forEach((e=>{const n=e.split(":");n[1]&&n[0]&&(t[n[0].trim()]=n[1].trim())}))}return t}n.r(t),n.d(t,"getStyle",(function(){return r}))},"./src/utilis/getStyleTags.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getStyleTags",(function(){return i}));var r=n("./src/utilis/ischildOf.js"),o=n("./src/enums/INLINE_ELEMENTS.js");function i(e,t){let n=e,i=e.parentElement;for(;i&&Object(r.ischildOf)(i,t.parentElement);){if(o.inline_elemets_arr.includes(i.nodeName)){const e=document.createElement(i.nodeName);n.__wrap(e),n=e}i=i.parentElement}return n}},"./src/utilis/isElement.js":function(e,t,n){"use strict";function r(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}n.r(t),n.d(t,"isElement",(function(){return r}))},"./src/utilis/ischildOf.js":function(e,t,n){"use strict";function r(e,t){if(!t)return!1;let n=e.parentNode;for(;null!=n;){if(n===t)return!0;n=n.parentNode}return!1}n.r(t),n.d(t,"ischildOf",(function(){return r}))},"./src/utilis/prototype.js":function(e,t,n){"use strict";n.r(t),n.d(t,"wrap",(function(){return r}));const r=function(e){return!!this.parentNode&&(this.parentNode.insertBefore(e,this),e.appendChild(this),e)};Element.prototype.__wrap=r},"./src/utilis/replaceNode.js":function(e,t,n){"use strict";n.r(t),n.d(t,"replaceNode",(function(){return r}));const r=function(e,t){if(e.parentNode)return e.parentNode.insertBefore(t,e),e.remove(),t}}})},function(e){e.exports=JSON.parse('{"Toggle":"toggle","Extend":"extend"}')},function(e,t,n){e.exports=n(4).default},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function a(){return(a=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,n,i,a,u,f=(t=d,n=l(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o(this,e)});function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),f.call(this)}return i=d,(a=[{key:"connectedCallback",value:function(){"true"===this.getAttribute("zero-space")&&(this.innerHTML="&#8203;")}}])&&r(i.prototype,a),u&&r(i,u),d}(i(HTMLElement));customElements.get("text-selection")||customElements.define("text-selection",u)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return he}));var r={H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",P:"P",LI:"LI",OL:"OL",ADDRESS:"ADDRESS",PRE:"PRE",TD:"TD"},o="h1,h2,h3,h4,h5,h6,p,pre,ol,li,address,td";function i(e){return Array.from(e.classList)}function a(e){function t(e){e.className||e.removeAttribute("class")}Array.from(e.querySelectorAll("span[class]")).concat(e).forEach((function(e){return function(e){t(e),Array.from(e.classList).forEach((function(n){Array.from(e.querySelectorAll("[class='".concat(n,"']"))).forEach((function(e){e.classList.remove(n),t(e)}))}))}(e)}))}Element.prototype.removeClassName=function(e){Array.from(this.querySelectorAll("[class='".concat(e,"']"))).concat(this).forEach((function(t){return t.classList.remove(e)}))};var l=void 0;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"isElement",value:function(e){try{return e instanceof HTMLElement}catch(t){return"object"===c(e)&&1===e.nodeType&&"object"===c(e.style)&&"object"===c(e.ownerDocument)}}},{key:"wrap",value:function(e,t){var n=[],r=(n=Array.isArray(e)?e:[e]).map((function(e){return e.parentNode}));if(0===r.filter((function(e,t,n){return n[0]!==e})).length)return r[0].insertBefore(t,n[0]),n.forEach((function(e){return t.appendChild(e)})),!0}}])&&s(t.prototype,n),r&&s(t,r),e}());function f(){if(document.body.createTextRange){var e=document.body.createTextRange();e.moveToElementText(this),e.select()}else if(window.getSelection){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(this),t.removeAllRanges(),t.addRange(n)}}Document.prototype.getSelectedElement=function(){var e=document.getSelection();if(null!==e){var t=e.anchorNode;if(null!==t){for(;3===t.nodeType;)t=t.parentNode;return t}return null}},Element.prototype.wrap=function(e){return"string"==typeof e&&(e=document.createElement(e)),l.parentNode.insertBefore(e,l),e.appendChild(l),e},Element.prototype.createSelection=f,Text.prototype.createSelection=f,Element.prototype.__closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e)&&t.isContentEditable&&!r[t.nodeName])return t;if(t.parentElement&&r[t.parentElement.nodeName])return null;t=t.parentElement.isContentEditable?t.parentElement:null}while(null!==t);return null},Element.prototype.ischildOf=function(e){if(!e)return!1;for(var t=this.parentNode;null!=t;){if(t===e)return!0;t=t.parentNode}return!1};var d=function(e){return!!this.parentNode&&(this.parentNode.insertBefore(e,this),e.appendChild(this),e)};function p(e,t){for(var n={},r=e.attributes,o=r.length-1;o>=0;o--)(t||!t&&"class"!==r[o].name&&"style"!==r[o].name)&&(n[r[o].name]||(n[r[o].name]=r[o].value));return n}Text.prototype.wrap=d,Element.prototype.wrap=d,Element.prototype.insertAfter=function(e){this.parentNode.insertBefore(e,this.nextSibling)},Element.prototype.replaceNode=function(e){if(this.parentNode)return this.parentNode.insertBefore(e,this),this.remove(),e},Element.prototype.unwrap=function(){var e=document.createRange();e.selectNodeContents(this);var t=e.extractContents();return this.replaceNode(t),t};var y={};function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}["SPAN","STRONG","EM","DEL","STRIKE","I","S","U","MARK","B","SUB","SUP","SMALL","INS","A"].forEach((function(e){y[e]=e}));var v=function(e){var t;if(!u.isElement(e))return null;if(!y[e.nodeName]||e.nodeType!==Node.ELEMENT_NODE)return null;var n=e.nodeName,r=e.firstElementChild;if(!r)return null;if(r.nodeName!==n||r.nodeType!==Node.ELEMENT_NODE)return null;if(e.textContent!==r.textContent)return null;var o={style:C(e),classes:i(e),attrs:p(e)};for(var l in o.style)if(Object.prototype.hasOwnProperty.call(o.style,l)){var c=o.style[l];r.style[l]="".concat(r.style[l]," ").concat(c).trim()}for(var s in O(r),o.attrs)if(Object.prototype.hasOwnProperty.call(o.attrs,s)){var f=o.attrs[s];r.setAttribute(s,f)}return(t=r.classList).add.apply(t,h(o.classes)),a(r),r.parentElement&&r.parentElement.unwrap(),r};function g(e,t){var n;if(!u.isElement(e)||!u.isElement(t))return null;if(!y[e.nodeName])return null;if(n=e.nodeName,e.nodeName!==t.nodeName)return null;var r=[{style:C(e),classes:i(e),attrs:p(e)},{style:C(t),classes:i(t),attrs:p(t)}],o={},l=!0;for(var c in r[0].attrs)if(Object.prototype.hasOwnProperty.call(r[0].attrs,c)){var s=r[0].attrs[c];if(s!==r[1].attrs[c]){l=!1;break}o[c]=s}if(!l)return null;var f=function(e,t){if(!e||!t)return[];var n=h(e),r=h(t);return n.filter((function(e){return r.includes(e)}))}(r[0].classes,r[1].classes),d=function(e,t){var n={};for(var r in e)if(t[r]){var o=e[r],i=t[r];i===o&&(n[r]=i)}return n}(r[0].style,r[1].style),m=function(e,t,r){var o,i=document.createElement(n);for(var a in r)if(Object.hasOwnProperty.call(r,a)){var l=r[a];i.setAttribute(a,l)}for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(i.style[c]=e[c]);t.length>0&&(o=i.classList).add.apply(o,h(t));return"SPAN"===i.nodeName&&0===i.attributes.length?(i.unwrap(),null):(i.normalize(),i)}(d,f,o);if(!m)return null;var v=[e,t];return v.forEach((function(e){var t,n,r;n=f,(r=(t=e).classList).remove.apply(r,h(n)),a(t),function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e.style[n]=null)}(e,d),function(e,t){for(var n in t)Object.hasOwnProperty.call(t,n)&&e.removeAttribute(n)}(e,o)})),u.wrap(v,m),h(m.children).forEach((function(e){E(e)})),m}function b(e){return e.replace(/\s/g,"").replace(/[\u200B-\u200D\uFEFF]/g,"")}function E(e){if(e&&e.isContentEditable){var t=function(e){Array.from(e.children).forEach((function(e){t(e),n(e)}));var r=function(e){var t=!1;return Array.from(e.children).forEach((function(e){for(var n=e;null!==n;){var r=n.nextSibling;if(!r)break;n=g(n,r),t=t||null!==n}})),t},o=function(e){var t=!1;return Array.from(e.children).forEach((function(e){for(var n=e;n&&1===n.nodeType;)n=v(n),t=t||null!==n})),t},i=!1;do{(e=n(e))&&(r(e),i=o(e))}while(i&&e)};t(e)}function n(e){return e.normalize(),a(e),O(e),e&&y[e.nodeName]&&0===e.childNodes.length||e&&"SPAN"===e.nodeName&&0===e.attributes.length?(e.unwrap(),null):e}}var w=n(0),S=n.n(w);function C(e){if(!e||!e.style)return{};var t={},n=e.getAttribute("style");if(n){var r=n.split(";");Array.isArray(r)&&r.forEach((function(e){var n=e.split(":");n[1]&&n[0]&&(t[n[0].trim()]=n[1].trim())}))}return t}function O(e){if(!e)return null;if(e.getAttribute("style")){var t=C(e),n=function(n){Object.prototype.hasOwnProperty.call(t,n)&&Array.from(e.querySelectorAll("span[style*='".concat(n,"=").concat(t[n],"']"))).forEach((function(e){e.style[n]=null,O(e)}))};for(var r in t)n(r)}else e.removeAttribute("style")}function N(e,t,n,r){e.style[t]=r?"".concat(e.style[t]," ").concat(n):e.style[t].replace(n,""),O(e),a(e),Array.from(e.querySelectorAll("[style*='".concat(n,"']"))).forEach((function(e){e.style[t]=e.style[t].replace(n,""),O(e),a(e)}))}function A(e,t,n){var r;e.style[t]=n,"color"===t&&(r={element:e,key:"color",value:n},[function(e){if("color"===e.key){var t=e.element.closest("[style*='text-decoration']");if(t){var n=S()(e.element,t);if(n)for(var r in O(),A(n.center,"text-decoration-color","".concat(e.value)),n)Object.prototype.hasOwnProperty.call(n,r)&&E(n[r]);else A(t,"text-decoration-color","".concat(e.value))}}}].forEach((function(e){return e(r)}))),Array.from(e.querySelectorAll("[style*='".concat(t,"']"))).forEach((function(e){e.style[t]=null,O(e)}))}var T=function(e){var t=R();if(!t)return{};var n=function(e,t){for(var n={},r=e;r&&r.ischildOf(t.parentElement);){var o=C(r);for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var a=o[i];n[i]||(n[i]=a)}r=r.parentElement}return n}(t,e);return t.closest("u")&&(n.underline=!0),t.closest("b,strong,bold")&&(n.bold=!0),t.closest("s")&&(n.lineThrough=!0),t.closest("i,em")&&(n.italic=!0),t.closest("mark")&&(n.mark=!0),n};function x(e,t,n){var r=B(e);return!!r&&(r.style[t]=n,Array.from(r.querySelectorAll("[style*='".concat(t,"']"))).forEach((function(e){return e.style[t]=null})),!0)}var j={BR:"BR",HR:"HR",IMG:"IMG",INPUT:"INPUT",AUDIO:"AUDIO",VIDEO:"VIDEO",PICTURE:"PICTURE"};function k(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){e.normalize(),Array.from(e.childNodes).forEach((function(t){if(1!==t.nodeType||t.textContent.trim()||0!==t.children.length||j[t.nodeName]){if(t.parentElement===e&&t.textContent.trim()&&(1===t.nodeType&&y[t.nodeName]&&!t.parentElement.closest(o)||3===t.nodeType)){var n=document.createElement("p");for(t.wrap(n);n.nextSibling&&(3===n.nextSibling.nodeType||y[n.nextSibling.nodeName]);)n.appendChild(n.nextSibling);n.normalize()}}else z(t)}))}function R(){var e=document.getSelection();if(e){var t=e.focusNode;if(null!==t){for(;3===t.nodeType;)t=t.parentNode;return t}return null}}function _(e,t){var n=function(e,t){if(e.classList&&(t.classList=k(e.classList)),e.style){var n=function(e){var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];t.push("".concat(n,":").concat(r))}return t.join(";")}(e.style);t.style=n}if(e.attrs)for(var r in e.attrs)if(Object.hasOwnProperty.call(e.attrs,r)){var o=e.attrs[r];t.setAttribute(r,o)}},r=function(e){var t,r,o=e.tag;switch(o){case"#text":t=document.createTextNode(e.textContent);break;case"#comment":t=document.createComment(e.textContent);break;case"A":(t=document.createElement(o)).href=e.href,t.target=e.target;break;default:t=document.createElement(o),r=!0}return r&&t&&n(e,t),t};return t||(t=r(e)),Array.isArray(e.children)&&e.children.forEach((function(e){var n=r(e);n&&(t.appendChild(n),_(e,n))})),t}function D(e){var t=e.nodeName,n=!0,r={},o=!0;switch(t){case"#text":case"#comment":r.tag=t,r.textContent=e.textContent.replace(/\u200B/g,""),n=!1,r.textContent.trim()||(o=!1);break;case"A":r.tag=t,r.href=e.href,r.target=e.target;break;default:r.tag=t}return o?(n&&(r.attrs={},Array.from(e.attributes).forEach((function(t){switch(t.name){case"style":var n=C(e);Object.keys(n).length>0&&(r.style=n);break;case"class":e.classList&&e.classList.length>0&&(r.classList=k(e.classList));break;default:r.attrs[t.name]=t.value}})),e.childNodes&&e.childNodes.length>0&&(r.children=k(e.childNodes).map((function(e){return D(e)})).filter((function(e){return e})))),r):null}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){"object"!==M(t)&&(t={});var n=document.createElement(t.el||"span");return Array.from(e.childNodes).forEach((function(e){return n.appendChild(e)})),e.appendChild(n),n}function B(e){return e?(1!==e.nodeType&&(e=e.parentElement),e?e.closest(o):void 0):null}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;n.focus();var r=Array.from(n.childNodes).filter((function(e){return e.nodeType===Node.TEXT_NODE}));if(0===r.length){for(r=e;r&&r.firstChild&&3!==r.nodeType;)r=r.firstChild;r&&(r=[r])}var o=document.createRange();o.setStart(r[0],t),o.setEnd(r[0],t),o.collapse(!0);var i=window.getSelection();i.removeAllRanges(),i.addRange(o)}function F(e){var t,n,r,o,i=R().closest("[contenteditable]"),a=!0;if(i&&i.isContentEditable||(a=!1),!a)return null;if(window.getSelection&&(r=window.getSelection()).getRangeAt&&r.rangeCount){var l;if((o=r.getRangeAt(0)).deleteContents(),"string"==typeof e){(l=document.createElement("div")).innerHTML=e;var c=document.createDocumentFragment();do{(t=l.firstChild)&&(n=c.appendChild(t))}while(t);o.insertNode(c)}else"object"===M(e)&&o.insertNode(e);n&&((o=o.cloneRange()).setStartAfter(n),o.collapse(!0),r.removeAllRanges(),r.addRange(o))}}function U(e,t){return e.intersectsNode?e.intersectsNode(t):(n=e,r=function(e){var t=e.ownerDocument.createRange();try{t.selectNode(e)}catch(n){t.selectNodeContents(e)}return t}(t),-1===n.compareBoundaryPoints(Range.END_TO_START,r)&&1===n.compareBoundaryPoints(Range.START_TO_END,r));var n,r}function K(e){var t=e.commonAncestorContainer;return function(e){for(var t=((e=e||document.body).ownerDocument||document).createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n=[],r=t.nextNode();r;)b(r.textContent)&&n.push(r),r=t.nextNode();return n}(t.parentNode||t).filter((function(t){return U(e,t)&&function(e){return e.textContent.length>0}(t)}))}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function V(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var W=function(e){var t=window.getSelection(),n=[],r=t.getRangeAt(0).commonAncestorContainer;if(3===r.nodeType&&(r=r.parentElement),!r)return n;if(!r.isContentEditable)return[];for(var o,i=Array.from(r.querySelectorAll(e)),a=0;a<i.length;a++)o=i[a],t.containsNode(o,!0)&&n.push(o);if(0===n.length){var l=R();if(l){var c=l.closest(e);c&&n.push(c)}}return n};function q(e,t){var n;if(t||(t=window.getSelection().getRangeAt(0)),t.collapsed){var r=document.createElement("span");return r.innerHTML="&#8203;",F(r),H(r),[r]}return e||(e="span"),"string"==typeof e&&(e=document.createElement(e)),n=function(e,t){var n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset;return function(t){var a=document.createRange(),l=e.cloneNode();a.selectNodeContents(t),t===n&&3===n.nodeType&&(a.setStart(t,o),n=l,o=0),t===r&&3===r.nodeType&&(a.setEnd(t,i),r=l,i=1),a.surroundContents(l);for(var c=l;c.textContent===c.parentElement.textContent&&c.nodeName===c.parentNode.nodeName;)c=c.parentNode;return c!==l&&l.unwrap(),c}}(e,t),K(t).map(n)}function G(e){return q(e,window.getSelection().getRangeAt(0))}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={remove:!0};Object.assign(r,n),document.getSelection().setBaseAndExtent(e,0,t,t.childNodes.length),r.remove&&[e,t].forEach((function(e){return e.unwrap()}))}function X(e,t){if(e&&t){var n=document.createElement("text-selection");n.setAttribute("zero-space",0===e.textContent.length);var r=document.createElement("text-selection");return r.setAttribute("zero-space",0===t.textContent.length),e.prepend(n),t.appendChild(r),{firstFlag:n,lastFlag:r}}}var J=n(1);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.plugins&&"boolean"==typeof n.plugins.copyPaste&&!1===n.plugins.copyPaste||(this.target=t,this.stylesToPaste="object"===Q(n.stylesToPaste)?n.stylesToPaste:null,this.paste=this.paste.bind(this),this.copy=this.copy.bind(this),this.destroy=this.destroy.bind(this),this.start())}var t,n,i;return t=e,(n=[{key:"copy",value:function(e){var t="";if(window.getSelection){var n=window.getSelection();if(n.rangeCount){for(var r=document.createElement("div"),o=0,i=n.rangeCount;o<i;++o){var a=n.getRangeAt(o),l=a.cloneContents();r.appendChild(l),"cut"===e.type&&a.extractContents(),Array.from(r.childNodes).forEach((function(e){j[e.nodeName]&&"BR"!==e.nodeName&&"HR"!==e.nodeName&&e.parentElement.removeChild(e)}))}t=r}}else document.selection&&"Text"===document.selection.type&&(t=document.selection.createRange().htmlText);e.preventDefault(),e.clipboardData.setData("styleit/html",t.innerHTML),e.clipboardData.setData("text/plain",t.textContent)}},{key:"paste",value:function(e){e.shiftKey?this.pastePlainText(e):this.pasteWithStyles(e)}},{key:"pastePlainText",value:function(e){var t=this,n=e.clipboardData||window.clipboardData;e.preventDefault();var r=n.getData("text/plain").trim();if((r=r.replace(/\n/g,"<br/>")).trim()){var o=document.createElement("p");o.innerHTML=r,F(o),H(o),o.parentElement!==this.target&&o.unwrap(),Array.from(this.target.children).forEach((function(e){e.textContent.trim()||t.target.removeChild(e)}))}}},{key:"pasteWithStyles",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("styleit/html").trim();if(t){var n=document.createElement("div");n.innerHTML=t,F(n),Array.from(n.children).forEach((function(e){b(e.textContent)||j[e.nodeName]||!r[e.nodeName]&&!y[e.nodeName]||e.parentElement.removeChild(e)})),Array.from(n.children).forEach((function(e){var t=e.parentElement.closest(o);t&&r[e.nodeName]&&b(t.textContent)===b(n.textContent)?t.parentElement.insertBefore(e,t):1===e.nodeType&&r[e.nodeName]&&t?(n.children.length>1&&e.insertAfter(document.createElement("BR")),e.unwrap()):b(e.textContent)||e.unwrap()}));var i=n.closest(o);if(i){var a=S()(n,i,{tag:i.nodeName});a&&(a.left.appendChild(a.center),a.center.appendChild(a.right),a.right.unwrap(),a.center.unwrap())}E(this.target),H(n),n.unwrap()}else this.pastePlainText(e)}},{key:"start",value:function(){this.target.addEventListener("paste",this.paste),this.target.addEventListener("copy",this.copy),this.target.addEventListener("cut",this.copy)}},{key:"destroy",value:function(){this.target&&(this.target.removeEventListener("paste",this.paste),this.target.removeEventListener("copy",this.copy),this.target.addEventListener("cut",this.copy))}}])&&Y(t.prototype,n),i&&Y(t,i),e}(),ee={},te={_blank:"_blank",_self:"_self",_parent:"_parent",_top:"_top"},ne=function(e){return e=(e=(e=(e=e.replace(/https:/g,"")).replace(/http:/g,"")).replace(/mailto:/g,"")).replace(/tel:/g,"")},re=function(e){var t=document.createElement("a");return t.href=e,t};var oe=function e(t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return null;this.onInspect=n,this.target=t;var o=function(){var e=T(r.target);"function"==typeof r.onInspect&&r.onInspect(e),"function"==typeof ee.inspect&&ee.inspect(e);var t=R();if(t){var n=t.closest("a");n&&"function"==typeof ee.inspectLink&&ee.inspectLink({protocol:n.protocol,href:ne(n.href),target:n.getAttribute("target")||"",element:n})}};this.onKeyDown=function(e){if(8===e.keyCode&&r.target.children.length<=1&&!r.target.textContent)return e.preventDefault(),!1;o()},this.onClick=function(){o()},this.target.addEventListener("click",this.onClick),this.target.addEventListener("keydown",this.onKeyDown),this.destroy=function(){r.target.removeEventListener("click",r.onClick),r.target.removeEventListener("keydown",r.onKeyDown),r.target=null}};function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ie(this,e),!t)return null;this.target=t,this.target.addEventListener("keydown",this.onDefaultKeyPress),r.plugins&&"boolean"==typeof r.plugins.keyPress&&!1===r.plugins.keyPress||("function"==typeof r.onKeyPress&&(this.onKeyPress=r.onKeyPress),this.keypress=function(e){if(8===e.keyCode){if(""===b(e.target.textContent))return void e.preventDefault()}else if(13===e.keyCode){if(e.shiftKey)return F("</br>&#8203;"),void e.preventDefault();var t=document.createRange(),r=window.getSelection(),o=B(r.anchorNode);if(o===n.target||!o)return!1;if(r.getRangeAt(0).extractContents(),t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,o.childNodes.length),r.removeAllRanges(),r.addRange(t),r.isCollapsed)return o&&!n.target.textContent.trim()&&o!==n.target&&(Array.from(n.target.children).forEach((function(e){e===o||e.textContent.trim()||e.unwrap()})),o.innerHTML="".concat(o.innerHTML,"&#8203;"),H(o),e.preventDefault()),!1;e.preventDefault();var i=t.extractContents();Array.from(i.children).forEach((function(e){1!==e.nodeType||e.textContent.trim()||j[e.nodeName]||e.unwrap()}));var a=document.createElement(o.nodeName||"p");a.appendChild(i),a.textContent.trim()||(a.innerHTML="&#8203;"),V(a,o),Array.from(a.previousSibling.attributes).forEach((function(e){a.setAttribute(e.name,e.value)}));var l=document.createElement("br");o.appendChild(l),r.removeAllRanges(),L(n.target),H(a,0)}"function"==typeof n.onKeyPress&&n.onKeyPress(e)},this.target.addEventListener("keydown",this.keypress),this.destroy=function(){n.target&&(n.target.addEventListener("keydown",n.onDefaultKeyPress),n.target.removeEventListener("keydown",n.keypress),n.target=null)})}var t,n,r;return t=e,(n=[{key:"onDefaultKeyPress",value:function(e){var t=e.key;if("ArrowLeft"===t||"ArrowRight"===t){var n=function(e){e&&(3!==e.nodeType||-1===e.textContent.indexOf("​")||b(e.textContent)||(e.textContent=""))},r=document.getSelection().anchorNode;n(r),r.nextSibling&&1===r.nextSibling.nodeType&&r.nextSibling.firstChild&&3===r.nextSibling.firstChild.nodeType&&n(r.nextSibling.firstChild)}}}])&&ae(t.prototype,n),r&&ae(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"connect",value:function(e,t){return("string"!=typeof e||(e=document.getElementById(e)))&&u.isElement(e)?(document.execCommand&&(document.execCommand("defaultParagraphSeparator",!1,"p"),document.execCommand("styleWithCSS",!0,null)),Array.from(e.querySelectorAll("[contenteditable]")).forEach((function(e){L(e),E(e)})),this.createDefaultStyle(),this.plugins={copyPaste:new Z(n=e,r=t),inspector:new oe(n,r.onInspect),keyPress:new le(n,r)},e):null;var n,r}},{key:"createDefaultStyle",value:function(){var e=document.createElement("style");e.innerHTML="\n            [contenteditable]{\n                min-height:10px;\n            }\n            ",document.head.appendChild(e)}},{key:"destroy",value:function(){for(var e in this.plugins)if(Object.prototype.hasOwnProperty.call(this.plugins,e)){var t=this.plugins[e];t.destroy&&t.destroy()}}}])&&ce(t.prototype,n),r&&ce(t,r),e}();n(3);function ue(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye=function(){function e(t,n){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__config={onInspect:void 0},this.on=function(e,t){ee[e]=t},this.Connector=new se,this.modeHandlers=(de(r={},J.Toggle,(function(e,t,n,r){return o.onToggle(e,t,n,r)})),de(r,J.Extend,(function(e,t,n,r){return o.onExtend(e,t,n,r)})),r),this.config=n?Object.assign(this.__config,n):this.__config,this.events={styleChanged:this.config.onInspect},this.connectedElement=this.Connector.connect(t,this.config)}var t,n,i;return t=e,(n=[{key:"save",value:function(e){return D(e||this.connectedElement)}},{key:"load",value:function(e){return _(e,this.connectedElement)}},{key:"destroy",value:function(){this.Connector.destroy();var e=this;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=null,delete e[t])}},{key:"unLink",value:function(){if(this.isValid()){var e=window.getSelection();if(e&&!e.toString()){var t,n=e.baseNode;return n&&3===n.nodeType&&n.parentElement&&(t=n.parentElement.__closest("a")),n&&1===n.nodeType&&(t=t.__closest("a")),t&&t.unwrap(),null}var r=G();if(Array.from(r).forEach((function(e){var t=e.__closest("a");if(t){var n=S()(e,t,{tag:"a"});n&&(n.center.unwrap(),n.left&&""===n.left.textContent.trim()&&n.left.unwrap(),n.right&&""===n.right.textContent.trim()&&n.right.unwrap())}Array.from(e.querySelectorAll("a")).forEach((function(e){e.unwrap()})),e.unwrap()})),r.length){var o=X(r[0],r[r.length-1]);$(o.firstFlag,o.lastFlag)}}}},{key:"setTagWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.attrs,r=void 0===n?{}:n;if(e&&y[e.toUpperCase()]){var o=W(e),i=G(e),a=X(i[0],i[i.length-1]),l=a.firstFlag,c=a.lastFlag;[].concat(ue(i),ue(o)).forEach((function(e){if(e&&(!e||e.parentElement))for(var t in r)if(Object.hasOwnProperty.call(r,t)){var n=r[t];e.setAttribute(t,n)}})),this.normalizeContentEditable(),l&&c&&$(l,c)}}},{key:"toggleWith",value:function(e){if(e&&y[e.toUpperCase()]){var t=W(e),n=!1;t.length>0&&(n=!0);var r=G(e),o=X(r[0],r[r.length-1]),i=o.firstFlag,a=o.lastFlag;n&&[].concat(ue(r),ue(t)).forEach((function(t){if(t&&(!t||t.parentElement)){var n=t.parentElement.__closest(e);if(n){var r=S()(t,n,{tag:t.nodeName});r&&r.center&&(Array.from(r.center.querySelectorAll(e)).forEach((function(e){return e.unwrap()})),r.center.unwrap())}else t.unwrap()}})),this.normalizeContentEditable(),i&&a&&$(i,a)}}},{key:"link",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&(!e||e.href)&&this.isValid()){var t=function(e,t){return e=(e=e.replace(/:/g,"")).replace(/\/\//g,""),(e+=":").includes("http")&&(e+="//"),t.push(e),e},n=e.href,r=void 0===n?"":n,o=e.protocol,i=void 0===o?"":o,a=e.target,l=void 0===a?"":a,c=[],s=re(r),u=ne(r.trim()),f=i.trim()||s.protocol,d=null,p=te[l.trim().toLowerCase()];if(p&&(d=p),f.trim()&&(f=t(f,c)),u){for(;"/"===u.charAt(0);)u=u.substring(1);c.push(u)}var y=c.join("");if(window.getSelection&&!window.getSelection().toString()){var h,m=R();if(m&&(h=m.closest("a")))return void(h.href=y)}this.setTagWith("a",{attrs:{href:y,target:d||"_blank"}})}}},{key:"formatBlock",value:function(e){if(!r[e.toUpperCase()])throw Error("valid tags: ".concat(o));var t=W(o);if(t.length>0){var n,i=G();i.length&&(n=X(i[0],i[i.length-1])),t.forEach((function(t){var n=document.createElement(e);Array.from(t.attributes).forEach((function(e){n.setAttribute(e.name,e.value)})),t.wrap(n),t.unwrap()})),Array.from(i).forEach((function(e){return e.unwrap()})),n&&n.firstFlag&&n.lastFlag&&$(n.firstFlag,n.lastFlag)}}},{key:"toggleClass",value:function(e,t){if(this.isValid()){if("string"!=typeof e)return null;var n=G();if(0!==n.length){t||(t={});var r=W("[class='".concat(e,"']"));("boolean"==typeof t.isON?t.isON:r.length>0)?n.forEach((function(t){if(t.parentElement){var n=t.parentElement.__closest("[class='".concat(e,"']"));if(n){var r=S()(t,n);r&&r.center.removeClassName(e)}else t.removeClassName(e)}})):n.forEach((function(t){return t.classList.add(e)}));var o=X(n[0],n[n.length-1]),i=o.firstFlag,a=o.lastFlag;if(this.normalizeContentEditable(),i&&a)$(i,a);else{var l=window.getSelection();l.removeAllRanges&&l.removeAllRanges()}}}}},{key:"execCmd",value:function(e,t,n,r){var o=this;if(this.isValid()&&this.isVAlidKeyValue(e,t)){this.ELEMENTS=[],n=n||J.Extend,r||(r={}),this.ELEMENTS=G();var i,a=X(this.ELEMENTS[0],this.ELEMENTS[this.ELEMENTS.length-1]);if(this.ELEMENTS.forEach((function(a){r.onOff=i;var l=o.modeHandlers[n](a,e,t,r);n===J.Toggle&&void 0===i&&(i=l)})),this.ELEMENTS.length>1&&this.normalizeContentEditable(),a&&a.firstFlag&&a.lastFlag)$(a.firstFlag,a.lastFlag);else{var l=window.getSelection();l.removeAllRanges&&l.removeAllRanges()}var c=T(this.connectedElement);"function"==typeof ee.inspect&&ee.inspect(c),this.dispatchEvent("styleChanged",c)}}},{key:"normalizeContentEditable",value:function(){var e=R();if(e){var t=e.closest("[contenteditable]");t||(t=this.connectedElement),E(t),t.normalize()}}},{key:"createCaretPlacement",value:function(e){if(!e)return null;var t=document.createElement("text-selection");return t.setAttribute("zero-space","true"),e.appendChild(t),t}},{key:"dispatchEvent",value:function(e,t){this.events[e]&&this.events[e](t)}},{key:"onToggle",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("block"!==o.target){var i=e.__closest("[style*='".concat(n,"']"));if(i&&r[i.nodeName]){var a=I(i);return i.style[t]=null,a.style[t]=n,o.onOff=!1,A(e,t,n)}if(i&&i!==e){void 0===o.onOff&&(o.onOff=!1);var l=S()(e,i);l&&N(l.center,t,n,o.onOff)}else void 0===o.onOff&&i?o.onOff=!1:void 0===o.onOff&&(o.onOff=!0),N(e,t,n,o.onOff);return o.onOff}this.createBlockStyle(o,e,t,n)}},{key:"onExtend",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("block"===r.target)this.createBlockStyle(r,e,t,n);else{var o=e.__closest("[style*='".concat(t,"']"));if(o){var i=S()(e,o);if(i)A(i.center,t,n);else{if("block"!==r.target){var a=I(o,{el:"span"});return A(a,t,n),o.style[t]=null,A(e,t,n)}o.style[t]=n}}else if("block"!==window.getComputedStyle(e).display&&"block"===r.target){var l=B(e);if(l&&l.ischildOf(this.connectedElement))A(l,t,n);else{var c=document.createElement("div");l.wrap(c),A(c,t,n)}}else A(e,t,n)}}},{key:"createBlockStyle",value:function(e,t,n,r){if("inline"===e.as){var o=B(t);if(o){var i=function(e){e.style[n]=null,Array.from(e.childNodes).forEach((function(e){3===e.nodeType?function(e){var t=document.createElement("span");t.style[n]=r,e.wrap(t)}(e):1!==e.nodeType||j[e.nodeName]?e.style[n]=r:i(e)}))};i(o)}}else{var a=x(t,n,r);if(!a){var l=t.closest("[contenteditable]");l&&l.isContentEditable&&(L(l),a=x(t,n,r))}}}},{key:"isVAlidKeyValue",value:function(e,t){return!("string"!=typeof e||"string"!=typeof t)}},{key:"isValid",value:function(){if(!this.connectedElement)return!1;var e=R();return!(!e||!e.ischildOf(this.connectedElement)&&e!==this.connectedElement||!e.isContentEditable)||void 0}}])&&pe(t.prototype,n),i&&pe(t,i),e}();var he=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new ye(t,n);r&&(this.toggleWith=r.toggleWith,this.execCmd=r.execCmd,this.toggleClass=r.toggleClass,this.link=r.link,this.unLink=r.unLink,this.formatBlock=r.formatBlock,this.save=r.save,this.load=r.load,this.destroy=r.destroy,this.on=r.on,this.MODES=J,this.toggleWith=this.toggleWith.bind(r),this.toggleClass=this.toggleClass.bind(r),this.execCmd=this.execCmd.bind(r),this.formatBlock=this.formatBlock.bind(r),this.on=this.on.bind(r),this.link=this.link.bind(r),this.unLink=this.unLink.bind(r),this.save=this.save.bind(r),this.load=this.load.bind(r),this.destroy=this.destroy.bind(r))}}])}));
//# sourceMappingURL=main.js.map
//# sourceMappingURL=styleit-api.js.map